var assertInfoApi="https://api.fund.eastmoney.com/trade/GetZSAssertInfo?callback=?&lt=";if(location.host.indexOf("fundtest")>-1){assertInfoApi="https://fundtest.eastmoney.com/dataapi/trade/GetZSAssertInfo?callback=?&lt="}$(function(){$.getScript("//sso.1234567.com.cn/FundTradeLoginState.aspx?lt="+getCookie("LToken"),function(){if(customer&&customer.CustomerNo!=""){loadLoginStatus()}else{taggleLoginStatusView(0)}});$("#logoutTTJJ").click(function(){setTimeout(function(){location.reload()},1000)});var assetsEye="assetsEye";var $eye=$(".assets .eye");$eye.on("click",function(e){if($eye.hasClass("open")){$eye.removeClass("open").addClass("close");$(".index_r .numberShow ").hide();$(".index_r .numberHide ").show();setCookie(assetsEye,"close")}else{$eye.removeClass("close").addClass("open");$(".index_r .numberShow ").show();$(".index_r .numberHide ").hide();setCookie(assetsEye,"open")}});if(getCookie(assetsEye)=="close"){$eye.removeClass("open").addClass("close");$(".index_r .numberShow ").hide();$(".index_r .numberHide ").show()}});function resolveUrl(url){if(ApplicationPath!="/"){return ApplicationPath+url}else{return url}}function tableSort(element,sortColIndex,sortType){var $table=$(element);var $rows=$table.find("tbody tr");var colIndex=sortColIndex;var evenCls="tr-even";var exchar="%|,";var emptyvalue="-";var dir=sortType=="asc"?1:-1;var regS=new RegExp(exchar,"g");$rows.sort(function(tr1,tr2){var $cell1=$(tr1.cells[colIndex]);var $cell2=$(tr2.cells[colIndex]);var v1=$cell1.attr("data-sortvalue"),v2=$cell2.attr("data-sortvalue");if(!v1&&v1!=0){v1=$.trim($cell1.text())}if(!v2&&v2!=0){v2=$.trim($cell2.text())}v1=v1.replace(regS,"");v2=v2.replace(regS,"");if(!isNaN(v1)){v1=parseFloat(v1)}if(!isNaN(v2)){v2=parseFloat(v2)}if(v1==emptyvalue){v1=9999999999*dir}if(v2==emptyvalue){v2=9999999999*dir}if(isNaN(v1)){if(!v1){v1=emptyvalue}return v1.localeCompare(v2)*dir}else{if(v1<v2){return -1*dir}else{if(v1>v2){return 1*dir}else{return 0}}}});if($rows.hasClass(evenCls)){$rows.removeClass(evenCls);$rows.filter(":visible:odd").addClass(evenCls)}$table.find("tbody").empty().append($rows)}function getThSortType(element,th){var target=$(th);var thActive=$(element+" th.sort");var triangleActive=$(".triangle .active");var span=$(".triangle span");var spanAsc=$(".triangle span.asc");var spanDesc=$(".triangle span.desc");var asc=target.find(".triangle .asc");var desc=target.find(".triangle .desc");var ascActive=target.find(".triangle .asc.active");var descActive=target.find(".triangle .desc.active");var sortType="desc";if(target.hasClass("active")){if(ascActive.length){asc.removeClass("active");desc.addClass("active");asc.css("border-color"," #F5F5F5 #F5F5F5 #999 #F5F5F5");desc.css("border-color","#ff3300 #F5F5F5 #F5F5F5 #F5F5F5");sortType="desc"}if(descActive.length){desc.removeClass("active");asc.addClass("active");desc.css("border-color","#999 #F5F5F5 #F5F5F5 #F5F5F5");asc.css("border-color"," #F5F5F5 #F5F5F5 #ff3300 #F5F5F5");sortType="asc"}}else{if(target.hasClass("sort")){span.removeClass("active");spanDesc.css("border-color","#999 #F5F5F5 #F5F5F5 #F5F5F5");spanAsc.css("border-color"," #F5F5F5 #F5F5F5 #999 #F5F5F5");thActive.removeClass("active");target.addClass("active");desc.addClass("active");desc.css("border-color","#ff3300 #F5F5F5 #F5F5F5 #F5F5F5");sortType="desc"}}return sortType}function setCookie(c_name,value,expiredays){var exdate=new Date();exdate.setDate(exdate.getDate()+expiredays);document.cookie=c_name+"="+escape(value)+((expiredays==null)?"":";expires="+exdate.toGMTString())}function getCookie(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""}function renderHotZsbFund(){$.get(resolveUrl("/home/GetHotZsbFund"),function(data){var $wrap=$("#userStatusWrap");if(data){$wrap.find(".js-fund-name").html("<a  title='"+data.SHORTNAME+"' href='http://fund.eastmoney.com/"+data.FCODE+".html?spm=17090701.zsb.pc' style='color:#fff'>"+data.SHORTNAME.substring(0,15)+"</a>");var $fundSyl=$wrap.find(".js-fund-syl");$fundSyl.removeClass("red").removeClass("green").text(data.SYL_1N);var syl1n=data.SYL_1N?data.SYL_1N.replace("%",""):0;if(syl1n>0){$fundSyl.addClass("red")}else{if(syl1n<0){$fundSyl.addClass("green")}}$wrap.find(".js-date-type").text("近1年");var btnBuyUrl="https://fund.eastmoney.com/"+data.FCODE+".html";if(data.ISBUY==2){btnBuyUrl="https://fund.eastmoney.com/"+data.FCODE+".html"}$wrap.find(".js-btn-buy").attr("href",btnBuyUrl);$wrap.find(".js-min-sg").text(data.MINSG)}})}function loadLoginStatus(){var apiUrl=assertInfoApi+getCookie("LToken");$.ajax({url:apiUrl,dataType:"jsonp",success:function(data){var strFunds="";if(!!data.Data&&data.Data.Succeed&&data.Data.Result!=null){if(data.Data.Result.IndexBagVol_AddOnWayAmount>0){taggleLoginStatusView(2,data.Data.Result)}else{taggleLoginStatusView(1)}}else{if(!data.Data||!data.Data.ErrorCode||data.Data.ErrorCode=="101"||data.Data.ErrorCode=="103"){}taggleLoginStatusView(1)}}})}function taggleLoginStatusView(status,data){var $userStatusWrap=$("#userStatusWrap");var statusCls={hasAssets:"status-has-assets",noAssets:"status-no-assets",noLogin:"status-no-login"};switch(status){case 0:$userStatusWrap.removeClass(statusCls.noAssets).removeClass(statusCls.hasAssets).addClass(statusCls.noLogin);break;case 1:renderHotZsbFund();$userStatusWrap.removeClass(statusCls.noLogin).removeClass(statusCls.hasAssets).addClass(statusCls.noAssets);break;case 2:$userStatusWrap.find(".js-money").html(data.IndexBagVol_AddOnWayAmount.toFixed(2)+"<span>元</span>");renderHotZsbFund();$userStatusWrap.removeClass(statusCls.noLogin).removeClass(statusCls.noAssets).addClass(statusCls.hasAssets);break}}function logout(){var $logoutTTJJ=$("#logoutTTJJ");if(!$logoutTTJJ.hasClass("ui-hide")){$.getScript("//sso.1234567.com.cn/FundTradeLoginState.aspx?t=logout&v="+(new Date()).getTime(),function(){$logoutTTJJ.addClass("ui-hide").find(".CustomerName").html("");$("#loginTTJJ").removeClass("ui-hide");$(".js-logout-show").removeClass("ui-hide")})}};